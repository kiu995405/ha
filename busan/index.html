<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Busan!!!</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f5f5f5;
        color: #333;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    h1 {
        text-align: center;
        color: #2c3e50;
        margin: 20px 0;
        font-size: 24px;
    }

    /* 버튼 컨테이너 */
    .container {
        max-width: 430px;
        width: 100%;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 12px;
        margin-bottom: 20px;
    }

    .category-btn {
        padding: 14px 30px;
        cursor: pointer;
        background: #FAECC5;
        color: #5a402c;
        font-weight: bold;
        border: 2px solid #F2CB61;
        border-radius: 10px;
        transition: all 0.3s ease;
        font-size: 16px;
        text-align: center;
        flex: 1 1 120px;
        box-sizing: border-box;
    }

    .category-btn:hover {
        background: #F2CB61;
        color: #fff;
        transform: translateY(-2px);
    }

    .category-btn.active {
        background: #F2CB61;
        color: #fff;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    /* 리스트 */
    #list {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
        margin-top: 10px;
        max-width: 430px;
        width: 100%;
    }

    .shop-item {
        padding: 15px 20px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        cursor: pointer;
        text-align: center;
        font-weight: 600;
        transition: transform 0.2s, box-shadow 0.2s;
        box-sizing: border-box;
    }

    .shop-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 15px rgba(0,0,0,0.2);
    }

    /* 상세페이지: 버튼/리스트보다 조금 작게 */
    #detail {
        margin-top: 15px;
        padding: 18px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        line-height: 1.6;
        max-width: 380px;
        width: 100%;
        box-sizing: border-box;
        text-align: center;
    }

    /* 지도 */
    #map {
        height: 400px;
        width: 100%;
        max-width: 430px;
        margin: 20px 0;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    @media (max-width: 430px) {
        .category-btn {
            flex: 1 1 100px;
            padding: 12px 20px;
            font-size: 15px;
        }

        .shop-item {
            font-size: 15px;
        }
    }
</style>
</head>
<body>

<h1>Busan!!!</h1>

<div class="container category-btn-container">
    <span class="category-btn" data-category="식당">식당</span>
    <span class="category-btn" data-category="카페">카페</span>
    <span class="category-btn" data-category="소품샵">소품샵</span>
</div>

<div id="list" class="container"></div>
<div id="detail"></div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const categoryColors = {
        "식당": "red",
        "카페": "blue",
        "소품샵": "green"
    };

    const data = {
        "식당": [
            { name: "해운대 암소갈비집", address: "부산 해운대구 중동1로 43", lat: 35.1632, lng: 129.1635, hours: "11:00 ~ 22:00", menu: "암소갈비, 양념갈비" },
            { name: "부산 원조 돼지국밥", address: "부산 부산진구 새싹로 12", lat: 35.1665, lng: 129.0590, hours: "09:00 ~ 21:00", menu: "돼지국밥, 수육" }
        ],
        "카페": [
            { name: "광안리 커피집", address: "부산 수영구 광안해변로 123", lat: 35.1530, lng: 129.1185, hours: "08:00 ~ 23:00", menu: "아메리카노, 카페라떼" },
            { name: "남포동 카페", address: "부산 중구 중앙대로 45", lat: 35.0991, lng: 129.0323, hours: "09:00 ~ 22:00", menu: "카페모카, 에이드" }
        ],
        "소품샵": [
            { name: "해운대 소품샵", address: "부산 해운대구 구남로 77", lat: 35.1611, lng: 129.1637, hours: "10:00 ~ 20:00", menu: "인테리어 소품, 문구" },
            { name: "광복동 소품샵", address: "부산 중구 광복로 101", lat: 35.1005, lng: 129.0321, hours: "11:00 ~ 21:00", menu: "기념품, 악세사리" }
        ]
    };

    const listDiv = document.getElementById('list');
    const detailDiv = document.getElementById('detail');

    const map = L.map('map').setView([35.1796, 129.0756], 12);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    let markers = [];
    for (const category in data) {
        data[category].forEach((item, index) => {
            const markerIcon = L.icon({
                iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-${categoryColors[category]}.png`,
                shadowUrl: 'https://unpkg.com/leaflet/dist/images/marker-shadow.png',
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                shadowSize: [41, 41]
            });
            const marker = L.marker([item.lat, item.lng], { icon: markerIcon }).addTo(map)
                .bindPopup(`<b>${item.name}</b><br>${item.address}`);
            marker.on('click', () => showDetail(category, index));
            markers.push({ marker, category, index });
        });
    }

    function showCategory(category) {
        listDiv.innerHTML = "";
        detailDiv.innerHTML = "";

        if (!data[category] || data[category].length === 0) {
            listDiv.innerHTML = `<p>등록된 ${category}가 없습니다.</p>`;
            return;
        }

        data[category].forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'shop-item';
            div.textContent = item.name;
            div.addEventListener('click', () => {
                showDetail(category, index);
                const targetMarker = markers.find(m => m.category === category && m.index === index);
                if (targetMarker) {
                    map.setView(targetMarker.marker.getLatLng(), 15, { animate: true });
                    targetMarker.marker.openPopup();
                }
            });
            listDiv.appendChild(div);
        });
    }

    function showDetail(category, index) {
        const item = data[category][index];
        detailDiv.innerHTML = `
            <h2>${item.name}</h2>
            <p><b>주소:</b> ${item.address}</p>
            <p><b>영업시간:</b> ${item.hours}</p>
            <p><b>대표메뉴:</b> ${item.menu}</p>
        `;
    }

    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            showCategory(btn.dataset.category);
        });
    });

    const firstBtn = document.querySelector('.category-btn');
    firstBtn.classList.add('active');
    showCategory(firstBtn.dataset.category);
});
</script>

</body>
</html>
